{% extends "discussion/base.html" %}

{% block forum_content %}
    <div class="forum-search">
        <h2>Search</h2>
        {% include 'discussion/_search_form.html' %}
    </div>

    <div class="forum-search-results">
    {% if object_list %}
        <h5><strong>{{ object_list.all.count }}</strong> results</h5>
        {% for post in object_list %}
            <article class="post">
                {% include 'discussion/_post_detail.html' %}
                {% with comments_count=post.comment_set.all.count  %}
                <div class="post-info">
                    <span class="comment-count">{{ comments_count|default:"No" }} repl{{ comments_count|pluralize:"y,ies" }}</span>
                    <a href="{% url discussion_post discussion_slug=post.discussion.slug pk=post.pk %}" class="post-permalink">Full conversation</a>
                </div>
                {% endwith %}
            </article>
        {% endfor %}
    {% else %}
        <p>No results</p>
    {% endif %}
    </div>

    <a href="{% url discussion_index %}">All discussions</a>
{% endblock %}