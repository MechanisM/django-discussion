{% extends "discussion/base.html" %}
{% load discussiontags %}

{% block bodyclass %}{{ block.super }} post-view{% endblock %}

{% block forum_content %}
    <article class="post" id="post-{{ post.id }}">
        <div class="post-info">
            {% include 'discussion/_post_detail.html' %}
            <div class="comment-count">{{ post.comment_set.all.count|default:"No" }} repl{{ post.comment_set.all.count|pluralize:"y,ies" }}</div>
            <div class="post-links">
                <a href="#reply" class="post-reply">Reply</a>
            </div>
        </div>
        <h3 class="replies">Replies:</h3>
        <section class="post-comments">
            {% for comment in post.comment_set.all %}
                <div class="comment comment-list-{{ forloop.counter }}" id="comment-{{ comment.id }}">
                    {% include 'discussion/_comment_detail.html' %}
                </div>
            {% endfor %}
            <div class="comment-form-wrapper" id="reply">
                {% comment_form post %}
            </div>
        </section>
    </article>

    <a href="{% url discussion slug=post.discussion.slug %}" class="index-link">All posts in {{ post.discussion }}</a>
{% endblock %}

